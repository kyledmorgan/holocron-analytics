# PR #4: Add seed data expansion framework playbook

## Header

| Field | Value |
|---|---|
| **PR Number** | 4 |
| **Title** | Add seed data expansion framework playbook |
| **URL** | https://github.com/kyledmorgan/holocron-analytics/pull/4 |
| **State** | merged |
| **Created** | 2026-01-17T05:35:02Z |
| **Updated** | 2026-01-17T21:44:23Z |
| **Merged** | 2026-01-17T21:44:23Z |
| **Base branch** | `working_20260115` |
| **Head branch** | `copilot/expand-synthetic-seed-data` |
| **Merge commit SHA** | `533892fa209dba663d5b190bc93f9d118e356fe1` |

---

## PR Body

Defines a repeatable, tool-agnostic process for expanding synthetic JSON seed datasets with provenance tracking and referential integrity.

## Changes

- **New playbook**: `agents/playbooks/db/seed_expansion_framework.md`
  - Additive-only rules (no edits/deletions of existing rows)
  - Row-level provenance via `SourceSystem`/`SourceRef`/`Notes` fields
  - GUID-based referencing conventions
  - Four expansion modes: Breadth, Depth, Theme, Hybrid
  - Copy/paste prompt template for AI tools
  - Quality targets (~100 rows/table, hundreds for high-value tables)

- **Updated**: `agents/README.md` with reference to new playbook

## Prompt Template Usage

```
Mode: [Breadth | Depth | Theme | Hybrid]
Continuity Frame(s): [Canon only | Canon + Legends]
Scope Focus:
- Deep drill-down targets: [Episode IV â€” Trench Run]

Provenance (required for every new row):
- tool: copilot-agent
- session_id: 2026-01-16_trenchrun_v1
```

<!-- START COPILOT CODING AGENT SUFFIX -->



<!-- START COPILOT ORIGINAL PROMPT -->



<details>

<summary>Original prompt</summary>

# Seed Data Expansion Framework (Additive Synthetic Seeds)

## Purpose
This document defines a repeatable, tool-agnostic process for expanding our **synthetic** JSON seed datasets. The goal is to add breadth and/or depth to the modeled dimensions/facts/bridges while:

- remaining **additive-only** (no edits/removals of existing rows),
- maintaining **referential integrity** across tables,
- staying **tool-agnostic** (Codex CLI, GitHub Copilot, ChatGPT-style tools, etc.),
- recording **provenance** for every new row (which tool/session generated it).

This framework is designed for:
- short-term: quickly maturing seed files for learning and demonstration,
- long-term: evolving into a community-facing â€œpromptable seed generatorâ€ workflow (likely integrated into a future website/UI).

---

## Non-Negotiables
### Additive-only
- Do **not** modify or delete existing rows.
- Only append new rows to the `rows` array for one or more seed files.

### Synthetic data only
- No verbatim dialogue lines, script excerpts, or long narrative plot descriptions.
- Proper nouns are allowed (names of characters/places/assets), but keep descriptions short and factual-ish.
- Any â€œsummaryâ€ fields should be compact and non-derivative.

### Best-effort duplicate avoidance (soft rule)
- Attempt not to create exact duplicates of an existing entity (same canonical name + same continuity frame + same work context).
- If duplicates happen, that is acceptable for now. **Do not block delivery**. We will address deduping downstream.

### Preserve loader compatibility
- Seed JSON must conform to the current seed loader expectations.
- Respect required columns, datatypes, and reference conventions (GUID-based linking, etc.).
- Do not introduce schema changes in seeds (no new columns).

---

## Seed File Structure Standard
Each seed JSON file should follow the established structure in `src/db/seeds/data/` (refer to existing files for exact schema). The framework assumes:

- A `target` identifying the destination schema/table.
- A `meta` section (file-level metadata).
- A `rows` section (data payload).

### File-level metadata (required)
Add/update (without breaking current loader) the `meta` section to include:

- `meta.seed_version` â€” semantic version of the seed file (e.g., `"0.3.0"`).
- `meta.generated_by` â€” tool identifier (e.g., `"copilot-agent"`, `"codex-cli"`, `"chatgpt"`).
- `meta.session_id` â€” human-friendly short token identifying the generation run (e.g., `"2026-01-16_trenchrun_v1"`).
- `meta.created_utc` â€” ISO timestamp.
- `meta.notes` â€” short description of what was added in this file.

If the loader does not tolerate unknown `meta` keys, store this info in a single existing metadata field that *is* tolerated. Prefer file-level metadata first.

### Row-level provenance (required)
Every new row appended must include provenance info, using whichever column(s) already exist in the table schema and seeds. Preference order:

1) If the table has explicit fields like:
   - `SourceSystem`, `SourceRef`, `CreatedBy`, `UpdatedBy`, `ProvenanceJson`, `ExtraJson`, `AttributesJson`, etc.  
   Put provenance there.

2) If the table has only an â€œextrasâ€ JSON field:
   - Put provenance inside that JSON object under a stable key, e.g.:

```json
"ExtraJson": {
  "_provenance": {
    "tool": "copilot-agent",
    "session_id": "2026-01-16_trenchrun_v1",
    "prompt_intent": "deep scene drill-down",
    "generated_utc": "2026-01-16T22:10:00Z"
  }
}
If no appropriate field exists:

Use the shortest available â€œNotesâ€ field to include a provenance marker (keep it short).

Identity + Referencing Rules
Keys
The database uses integer identity keys as PKs (*Key). Seeds should typically NOT provide those unless the loader explicitly supports identity inserts.

Every row must include the tableâ€™s GUID column (unique, stable).

GUID uniqueness is mandatory.

References
For FKs between tables:

Prefer GUID-based linking (e.g., FranchiseGuid, WorkGuid, SceneGuid, etc.) if the loader supports it.

If the loader expects FK integer keys, only use that approach where deterministic and already used in existing seed patterns.

SCD-style columns
Where present, populate with reasonable defaults for new rows:

IsActive = true

IsLatest = true

ValidFromUtc / CreatedUtc / UpdatedUtc set to reasonable timestamps

Any checksum/hash column:

follow the existing seed convention (populate if required; otherwise omit if computed later)

Quality Targets (Guidance, not a hard-stop)
Breadth-first targets
Every table should have â€œenoughâ€ records to be queryable and educational.

Aim: >= 100 rows per table where it makes sense.

Naturally small tables (e.g., DimFranchise) can remain small but complete.

Depth targets (high-value tables)
Prefer to be in the hundreds for:

Characters, Species

Works, Scenes

Tech assets/instances (Droids, Ships, Weapons)

FactEvent + bridges (participants/assets)

Claims and continuity issues (moderate scale is fine)

Event Modeling Guidance (to keep t...

</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

ðŸ’¡ You can make Copilot smarter by setting up custom instructions, customizing its development environment and configuring Model Context Protocol (MCP) servers. Learn more [Copilot coding agent tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---

## Comments

_No comments._

---

## Review Comments (inline diff)

_No inline review comments._

---

## Copilot Artifacts

_No Copilot artifact indicators detected._
