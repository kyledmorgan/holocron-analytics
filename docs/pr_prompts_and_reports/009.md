# PR #9: [WIP] Update existing JSON seed data for quality improvement

## Header

| Field | Value |
|---|---|
| **PR Number** | 9 |
| **Title** | [WIP] Update existing JSON seed data for quality improvement |
| **URL** | https://github.com/kyledmorgan/holocron-analytics/pull/9 |
| **State** | merged |
| **Created** | 2026-01-18T04:41:47Z |
| **Updated** | 2026-01-19T03:53:17Z |
| **Merged** | 2026-01-19T03:53:16Z |
| **Base branch** | `working_20260115` |
| **Head branch** | `copilot/cleanup-seed-data-issues` |
| **Merge commit SHA** | `70fa64ca973b5f16cb0c23b8aed9420b832b3ddb` |

---

## PR Body

- [x] Review repository structure, seed JSON files, and schema relationships
- [x] Identify low-quality seed values with local context joins; list manual review needs
- [x] Apply targeted descriptive-field fixes in-place without altering keys/row counts
- [x] Generate seed cleanup report with metrics and samples
- [ ] Run relevant load/tests and validate integrity
- [ ] Re-run checks after fixes if needed and finalize summary

<!-- START COPILOT CODING AGENT SUFFIX -->



<!-- START COPILOT ORIGINAL PROMPT -->



<details>

<summary>Original prompt</summary>

You are working in a local git repository that contains:
- SQL Server DDL scripts for a dimensional/fact/bridge model (Star Wars ‚ÄúHolocron‚Äù learning warehouse)
- JSON seed files that load into those dim/fact/bridge tables via an existing Python loader/harness
- Docker compose and/or a local test harness that can load the database and seed data

## Problem statement
Some seed data appears incomplete or low-quality due to context-window limits or model behavior. We see:
- placeholder/gibberish values (e.g., "TBD", "lorem", random tokens, repeated dummy strings)
- blank/empty descriptive fields where meaningful values should exist
- ‚Äúobviously wrong‚Äù labels (e.g., a character with a nonsense name, event summaries that are nonsense)
These issues may only be detectable by joining across dim/fact/bridge tables to see the human-readable context (names/titles/verbs/summary fields).

## Goal
Perform a targeted cleanup of existing seed data ONLY:
- Update existing JSON seed row values in-place (same records)
- Do NOT add new rows
- Do NOT delete rows
- Do NOT modify integer keys, GUIDs, foreign keys, or any relationship-critical columns
- Do NOT re-key records, merge records, or deduplicate
- Only fix values that are clearly gibberish, placeholder, empty, or demonstrably false when cross-checked against related tables

## Scope (what you may change)
- Only ‚Äúdescriptive/value‚Äù columns: names, titles, labels, summaries, notes, categories, types, verb-like fields, short descriptors, display fields
- Only when the current value is low-quality (gibberish/placeholder/empty) AND the correct value is inferable from local context (seed files + relationships)
- If the correct value cannot be inferred with high confidence, leave it unchanged and record it in the report as ‚Äúneeds manual review‚Äù.

## Out of scope (hard constraints)
- No new records in any JSON file
- No deletions from JSON
- No changes to surrogate keys / identity keys
- No changes to GUIDs
- No changes to FK columns
- No modifications to DDL or loader logic, unless required to run validation (but prefer not to)
- No web browsing; operate only on repository content and locally derived joins

## Approach
1) Discover repo structure:
   - Identify JSON seed directory (likely seeds/ or src/seeds/ or db/seeds/)
   - Identify DDL directory and table list
   - Identify loader/harness entrypoint and how to run a local load/test
2) Build an automated ‚Äúseed quality scanner‚Äù:
   - Parse all seed JSON files and map to tables
   - Identify candidate low-quality fields using heuristics:
     - empty string / null where required or semantically important
     - placeholder patterns: "TBD", "TODO", "lorem", "placeholder", "unknown", "n/a" (case-insensitive)
     - repeated tokens across many rows (same summary repeated)
     - high non-alphabetic ratio / random character sequences
     - extremely short generic strings in key fields (e.g., Name="X", Title="Thing")
   - Produce an initial report: table, key, column, current value, reason flagged
3) Join context across related tables (best effort):
   - Use schema relationships: e.g., Work->Scene->Event, Event->Participants->Entity, Entity->Character/Org/Location/TechInstance, etc.
   - For each flagged value, compute a contextual ‚Äúrendered row‚Äù with joined names/titles to judge plausibility.
4) Apply conservative fixes:
   - Only update values when you can infer a better value from local context.
   - Examples:
     - If a row‚Äôs DisplayName is placeholder but ExternalId or linked Work/Scene/Entity provides the real name, fill it.
     - If a SceneName is blank but Work title + scene ordinal pattern exists, use a sensible minimal label like ‚ÄúScene {ordinal}‚Äù ONLY if it is not already present elsewhere and does not introduce new semantics.
     - If an Event Summary is gibberish, replace with a minimal factual summary assembled from existing structured context:
       - ‚Äú{EventTypeName} involving {Primary participants} at {Location}‚Äù
       - Keep it short; do not add narrative, quotes, or copyrighted text.
   - If you cannot confidently infer an improvement, do not change it.
5) Ensure constraints remain intact:
   - JSON counts per file unchanged
   - Keys/GUIDs/FKs unchanged
   - Loader still succeeds and integrity constraints still hold
6) Validate:
   - Run existing test harness (preferred) to load JSON into SQL Server and confirm it succeeds
   - Run a small set of validation queries (counts, FK integrity, and ‚Äúflagged fields reduced‚Äù metrics)
7) Deliverables:
   - Updated JSON seed files (in-place modifications only)
   - A markdown report saved in the repo (e.g., docs/data-quality/seed_cleanup_report.md) including:
     - Summary metrics: number of fields flagged, number fixed, number left for manual review
     - Table-by-table breakdown
     - Before/after samples (small, non-copyright narrative; just field values)
     - A list of ‚Äúmanual review candidates‚Äù with joined context
   - A brief commit message suggestion

#...

</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

üí¨ We'd love your input! Share your thoughts on Copilot coding agent in our [2 minute survey](https://gh.io/copilot-coding-agent-survey).

---

## Comments

_No comments._

---

## Review Comments (inline diff)

_No inline review comments._

---

## Copilot Artifacts

_No Copilot artifact indicators detected._
