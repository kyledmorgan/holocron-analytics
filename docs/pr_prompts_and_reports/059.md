# PR #59: Add script to export PR prompts and reports into numbered markdown files

## Header

| Field | Value |
|---|---|
| **PR Number** | 59 |
| **Title** | Add script to export PR prompts and reports into numbered markdown files |
| **URL** | https://github.com/kyledmorgan/holocron-analytics/pull/59 |
| **State** | merged |
| **Created** | 2026-02-21T00:39:23Z |
| **Updated** | 2026-02-21T00:45:06Z |
| **Merged** | 2026-02-21T00:45:06Z |
| **Base branch** | `working_20260115` |
| **Head branch** | `copilot/export-pr-prompts-reports` |
| **Merge commit SHA** | `2323773cd86dd2d0df8adfaaf8df2845dbca4e08` |

---

## PR Body

Adds a stdlib-only Python script that fetches GitHub PR metadata, comments, and review comments for a user-supplied range and writes each as a zero-padded markdown file under `docs/pr_prompts_and_reports/`.

## Script: `scripts/export_pr_prompts_and_reports.py`

- **Inputs:** `--owner`, `--repo`, `--start`, `--end`, `--out-dir`, `--include-comments`, `--include-review-comments`, `--overwrite`; `GITHUB_TOKEN` from env (fail-fast if absent)
- **File naming:** padding width derived from `--end` (`end=50` → `001.md`…`050.md`; `end=1000` → `0001.md`…)
- **Content per file:** PR header table, raw body, issue/conversation comments, inline review comments, and a Copilot artifact heuristic section (matches `github-actions[bot]` author or keywords: `"Original prompt"`, `"Copilot"`, etc.)
- **Resilience:** full `Link` header pagination (`per_page=100`), rate-limit sleep on `X-RateLimit-Remaining: 0`, graceful 404 placeholder, skip-existing-files guard
- **No dependencies:** stdlib only (`argparse`, `urllib.request`, `json`, `pathlib`, `re`, `time`)

```bash
export GITHUB_TOKEN=ghp_...
python scripts/export_pr_prompts_and_reports.py --start 1 --end 50
# → docs/pr_prompts_and_reports/001.md … 050.md

# Re-export with overwrite, custom repo
python scripts/export_pr_prompts_and_reports.py \
    --owner myorg --repo myrepo --start 1 --end 1000 --overwrite
# → docs/pr_prompts_and_reports/0001.md … 1000.md
```

## Supporting files

- `docs/pr_prompts_and_reports/.gitkeep` — tracks output directory in git
- `tests/unit/test_export_pr_prompts_and_reports.py` — 24 unit tests covering pad-width logic, Link-header parsing, Copilot heuristic detection, 404 rendering, and PR markdown output

> [!WARNING]
>
> <details>
> <summary>Firewall rules blocked me from connecting to one or more addresses (expand for details)</summary>
>
> #### I tried to connect to the following addresses, but was blocked by firewall rules:
>
> - `https://api.github.com/repos/kyledmorgan/holocron-analytics/pulls/1`
>   - Triggering command: `/usr/bin/python python scripts/export_pr_prompts_and_reports.py --start 1 --end 50` (http block)
>   - Triggering command: `/usr/bin/python python scripts/export_pr_prompts_and_reports.py --start 1 --end 3 --out-dir /tmp/pr_test` (http block)
>
> If you need me to access, download, or install something from one of these locations, you can either:
>
> - Configure [Actions setup steps](https://gh.io/copilot/actions-setup-steps) to set up my environment, which run before the firewall is enabled
> - Add the appropriate URLs or hosts to the custom allowlist in this repository's [Copilot coding agent settings](https://github.com/kyledmorgan/holocron-analytics/settings/copilot/coding_agent) (admins only)
>
> </details>

<!-- START COPILOT CODING AGENT TIPS -->
---

✨ Let Copilot coding agent [set things up for you](https://github.com/kyledmorgan/holocron-analytics/issues/new?title=✨+Set+up+Copilot+instructions&body=Configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5BBest%20practices%20for%20Copilot%20coding%20agent%20in%20your%20repository%5D%28https://gh.io/copilot-coding-agent-tips%29%2E%0A%0A%3COnboard%20this%20repo%3E&assignees=copilot) — coding agent works faster and does higher quality work when set up for your repo.

---

## Comments

_No comments._

---

## Review Comments (inline diff)

_No inline review comments._

---

## Copilot Artifacts

_No Copilot artifact indicators detected._
